<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-2QJTEKK89H"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-2QJTEKK89H");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Resize JPG, PNG, SVG or GIF images. Define pixel dimensions or percentage to resize."
    />
    <title>Resize Image - Bang's Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Outfit:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Outfit", sans-serif;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body
    class="bg-gray-50 text-gray-800 min-h-screen flex flex-col relative overflow-x-hidden"
  >
    <!-- Background -->
    <div
      class="fixed inset-0 z-[-1] overflow-hidden pointer-events-none opacity-50"
    >
      <div
        class="absolute top-[10%] left-[10%] w-[40%] h-[40%] rounded-full bg-blue-200/40 blur-[100px]"
      ></div>
      <div
        class="absolute bottom-[20%] right-[10%] w-[30%] h-[30%] rounded-full bg-purple-200/40 blur-[100px]"
      ></div>
    </div>

    <main class="flex-grow container mx-auto px-4 py-8 max-w-5xl">
      <!-- Header -->
      <header
        class="flex items-center justify-between mb-8 animate-[fadeIn_0.6s_ease-out]"
      >
        <a
          href="index.html"
          class="flex items-center gap-2 text-gray-500 hover:text-blue-600 transition-colors"
        >
          <i class="fa-solid fa-arrow-left"></i>
          <span class="font-medium">All Tools</span>
        </a>
        <h1
          class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"
        >
          Resize Image
        </h1>
        <div class="w-20"></div>
        <!-- Spacer -->
      </header>

      <!-- Tool Container -->
      <div
        class="bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/50 overflow-hidden animate-[fadeIn_0.7s_ease-out] min-h-[600px] flex flex-col"
      >
        <!-- Upload View -->
        <div
          id="uploadView"
          class="flex-1 flex flex-col items-center justify-center p-12 text-center transition-all"
        >
          <div class="w-full max-w-xl">
            <label
              for="fileInput"
              class="group block border-3 border-dashed border-gray-300 rounded-3xl p-16 cursor-pointer hover:border-blue-500 hover:bg-blue-50/50 transition-all duration-300"
            >
              <div
                class="w-20 h-20 mx-auto mb-6 bg-blue-100 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"
              >
                <i class="fa-solid fa-expand text-3xl text-blue-600"></i>
              </div>
              <h2
                class="text-3xl font-bold text-gray-700 mb-2 group-hover:text-blue-600 transition-colors"
              >
                Select Image
              </h2>
              <p class="text-gray-400 text-lg">or drop file here</p>
              <input
                type="file"
                id="fileInput"
                accept="image/*"
                class="hidden"
              />
            </label>
          </div>
        </div>

        <!-- Workspace View -->
        <div
          id="workspaceView"
          class="hidden flex-1 flex flex-col lg:flex-row h-full"
        >
          <!-- Preview Area -->
          <div
            class="flex-1 p-8 bg-gray-50/50 flex flex-col items-center justify-center relative border-b lg:border-b-0 lg:border-r border-gray-200"
          >
            <img
              id="previewImage"
              class="max-w-full max-h-[60vh] object-contain rounded-lg shadow-sm"
              src=""
              alt="Preview"
            />
            <div
              class="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1.5 rounded-lg shadow-sm text-sm font-medium text-gray-600 border border-white/50"
            >
              Original: <span id="originalDims">0 x 0 px</span>
            </div>
          </div>

          <!-- Controls Area -->
          <div
            class="w-full lg:w-80 p-6 flex flex-col gap-6 bg-white/50 backdrop-blur-sm"
          >
            <div>
              <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                <i class="fa-solid fa-sliders text-blue-600"></i> Resize Options
              </h3>

              <!-- Tabs -->
              <div class="flex p-1 bg-gray-200/50 rounded-xl mb-6">
                <button
                  id="tabPixels"
                  class="flex-1 py-1.5 text-sm font-medium rounded-lg bg-white shadow-sm text-blue-600 transition-all"
                >
                  By Pixels
                </button>
                <button
                  id="tabPercent"
                  class="flex-1 py-1.5 text-sm font-medium rounded-lg text-gray-500 hover:text-gray-700 transition-all"
                >
                  By Percentage
                </button>
              </div>

              <!-- Pixels Input -->
              <div id="pixelInputs" class="space-y-4">
                <div class="flex gap-4">
                  <div class="flex-1">
                    <label
                      class="block text-xs font-semibold text-gray-500 uppercase mb-1"
                      >Width (px)</label
                    >
                    <input
                      type="number"
                      id="widthInput"
                      class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"
                    />
                  </div>
                  <div class="flex-1">
                    <label
                      class="block text-xs font-semibold text-gray-500 uppercase mb-1"
                      >Height (px)</label
                    >
                    <input
                      type="number"
                      id="heightInput"
                      class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"
                    />
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <input
                    type="checkbox"
                    id="lockRatio"
                    checked
                    class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"
                  />
                  <label
                    for="lockRatio"
                    class="text-sm text-gray-600 select-none"
                    >Maintain Aspect Ratio</label
                  >
                </div>
              </div>

              <!-- Percentage Input -->
              <div id="percentInputs" class="hidden space-y-4">
                <div>
                  <label
                    class="block text-xs font-semibold text-gray-500 uppercase mb-1"
                    >Percentage</label
                  >
                  <div class="flex items-center gap-4">
                    <input
                      type="range"
                      id="percentRange"
                      min="1"
                      max="100"
                      value="50"
                      class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                    />
                    <span
                      id="percentValue"
                      class="text-sm font-bold text-blue-600 w-12 text-right"
                      >50%</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-auto space-y-4">
              <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                <div
                  class="text-xs text-blue-600 font-semibold uppercase tracking-wider mb-1"
                >
                  Target Dimensions
                </div>
                <div class="font-mono text-lg font-bold text-gray-900">
                  <span id="targetWidth">0</span> x
                  <span id="targetHeight">0</span> px
                </div>
              </div>

              <button
                id="btnResize"
                class="w-full py-3.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 flex items-center justify-center gap-2"
              >
                <span id="btnText">Resize Image</span>
                <i class="fa-solid fa-bolt"></i>
              </button>

              <a
                id="downloadLink"
                class="hidden w-full py-3.5 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all active:scale-95 flex items-center justify-center gap-2"
              >
                Download Resized
                <i class="fa-solid fa-download"></i>
              </a>

              <button
                id="btnReset"
                class="w-full py-2.5 text-gray-500 hover:text-gray-700 font-medium text-sm transition-colors"
              >
                Upload Different Image
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      const fileInput = document.getElementById("fileInput");
      const uploadView = document.getElementById("uploadView");
      const workspaceView = document.getElementById("workspaceView");
      const previewImage = document.getElementById("previewImage");
      const originalDimsDisplay = document.getElementById("originalDims");

      // Tabs
      const tabPixels = document.getElementById("tabPixels");
      const tabPercent = document.getElementById("tabPercent");
      const pixelInputs = document.getElementById("pixelInputs");
      const percentInputs = document.getElementById("percentInputs");

      // Inputs
      const widthInput = document.getElementById("widthInput");
      const heightInput = document.getElementById("heightInput");
      const lockRatio = document.getElementById("lockRatio");
      const percentRange = document.getElementById("percentRange");
      const percentValue = document.getElementById("percentValue");

      // Outputs
      const targetWidthDisplay = document.getElementById("targetWidth");
      const targetHeightDisplay = document.getElementById("targetHeight");
      const btnResize = document.getElementById("btnResize");
      const downloadLink = document.getElementById("downloadLink");
      const btnReset = document.getElementById("btnReset");

      let originalImage = new Image();
      let currentMode = "pixels"; // 'pixels' or 'percent'
      let aspectRatio = 1;
      let originalFile = null;

      // --- Event Listeners ---
      fileInput.addEventListener("change", handleFileSelect);

      tabPixels.addEventListener("click", () => switchMode("pixels"));
      tabPercent.addEventListener("click", () => switchMode("percent"));

      widthInput.addEventListener("input", handleWidthChange);
      heightInput.addEventListener("input", handleHeightChange);
      percentRange.addEventListener("input", handlePercentChange);

      btnResize.addEventListener("click", resizeImage);
      btnReset.addEventListener("click", resetUI);

      // --- Functions ---

      function handleFileSelect(event) {
        const file = event.target.files[0];
        if (!file) return;
        originalFile = file;

        const reader = new FileReader();
        reader.onload = (e) => {
          originalImage.onload = () => {
            // Init logic
            aspectRatio = originalImage.width / originalImage.height;
            previewImage.src = originalImage.src;

            originalDimsDisplay.textContent = `${originalImage.width} x ${originalImage.height} px`;

            // Set default values
            widthInput.value = originalImage.width;
            heightInput.value = originalImage.height;
            percentRange.value = 50;
            handlePercentChange(); // Init percent target display

            // Switch views
            uploadView.classList.add("hidden");
            workspaceView.classList.remove("hidden");

            // Reset state
            downloadLink.classList.add("hidden");
            btnResize.classList.remove("hidden");
            if (currentMode === "pixels")
              updateTargetDisplay(originalImage.width, originalImage.height);
          };
          originalImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }

      function switchMode(mode) {
        currentMode = mode;
        if (mode === "pixels") {
          tabPixels.classList.add("bg-white", "shadow-sm", "text-blue-600");
          tabPixels.classList.remove("text-gray-500");
          tabPercent.classList.remove("bg-white", "shadow-sm", "text-blue-600");
          tabPercent.classList.add("text-gray-500");

          pixelInputs.classList.remove("hidden");
          percentInputs.classList.add("hidden");

          // Update target from current inputs
          updateTargetDisplay(widthInput.value, heightInput.value);
        } else {
          tabPercent.classList.add("bg-white", "shadow-sm", "text-blue-600");
          tabPercent.classList.remove("text-gray-500");
          tabPixels.classList.remove("bg-white", "shadow-sm", "text-blue-600");
          tabPixels.classList.add("text-gray-500");

          pixelInputs.classList.add("hidden");
          percentInputs.classList.remove("hidden");

          handlePercentChange();
        }
      }

      function handleWidthChange() {
        if (lockRatio.checked && widthInput.value) {
          heightInput.value = Math.round(widthInput.value / aspectRatio);
        }
        updateTargetDisplay(widthInput.value, heightInput.value);
      }

      function handleHeightChange() {
        if (lockRatio.checked && heightInput.value) {
          widthInput.value = Math.round(heightInput.value * aspectRatio);
        }
        updateTargetDisplay(widthInput.value, heightInput.value);
      }

      function handlePercentChange() {
        const p = percentRange.value;
        percentValue.textContent = p + "%";

        const w = Math.round(originalImage.width * (p / 100));
        const h = Math.round(originalImage.height * (p / 100));
        updateTargetDisplay(w, h);
      }

      function updateTargetDisplay(w, h) {
        targetWidthDisplay.textContent = w || 0;
        targetHeightDisplay.textContent = h || 0;
      }

      function resizeImage() {
        if (!originalImage.src) return;

        // Get final dimensions
        let w, h;
        if (currentMode === "pixels") {
          w = parseInt(widthInput.value);
          h = parseInt(heightInput.value);
        } else {
          const p = parseInt(percentRange.value) / 100;
          w = Math.round(originalImage.width * p);
          h = Math.round(originalImage.height * p);
        }

        if (!w || !h) return;

        btnResize.disabled = true;
        btnResize.innerHTML =
          '<i class="fa-solid fa-spinner fa-spin"></i> Processing...';

        setTimeout(() => {
          const canvas = document.createElement("canvas");
          canvas.width = w;
          canvas.height = h;
          const ctx = canvas.getContext("2d");

          // High quality scaling
          ctx.imageSmoothingEnabled = true;
          ctx.imageSmoothingQuality = "high";

          ctx.drawImage(originalImage, 0, 0, w, h);

          // Export
          const mime =
            originalFile.type === "image/png" ? "image/png" : "image/jpeg";
          canvas.toBlob(
            (blob) => {
              const url = URL.createObjectURL(blob);
              downloadLink.href = url;
              downloadLink.download = `resized_${w}x${h}_${originalFile.name}`;

              btnResize.classList.add("hidden");
              downloadLink.classList.remove("hidden");
              btnResize.disabled = false;
              btnResize.innerHTML =
                'Resize Image <i class="fa-solid fa-bolt"></i>';
            },
            mime,
            0.92,
          );
        }, 100);
      }

      function resetUI() {
        fileInput.value = "";
        originalImage = new Image();
        uploadView.classList.remove("hidden");
        workspaceView.classList.add("hidden");
        downloadLink.classList.add("hidden");
        btnResize.classList.remove("hidden");
      }

      // Drag and drop
      const dropZone = document.querySelector('label[for="fileInput"]');
      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.classList.add("border-blue-500", "bg-blue-50/50");
      });
      dropZone.addEventListener("dragleave", (e) => {
        e.preventDefault();
        dropZone.classList.remove("border-blue-500", "bg-blue-50/50");
      });
      dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.classList.remove("border-blue-500", "bg-blue-50/50");
        if (e.dataTransfer.files.length) {
          fileInput.files = e.dataTransfer.files;
          handleFileSelect({ target: fileInput });
        }
      });
    </script>
  </body>
</html>
